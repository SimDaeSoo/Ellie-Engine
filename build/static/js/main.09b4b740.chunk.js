(this.webpackJsonpEngine=this.webpackJsonpEngine||[]).push([[0],{320:function(e,t,n){"use strict";n.r(t);var i,a,r=n(0),c=n.n(r),o=n(32),s=n.n(o),l=n(91),d=n(11),h=n.n(d),u=n(55),f=n(37),b=n(9),g=n(323),x=n(155),w=n(141),p=n(4),v=n(145),j=n.n(v);function m(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(h.a.mark((function e(t){var n,i,a,r,c,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for("https://simdaesoo.github.io/Engine/build",n=[],i=[],a=1;a<=61;a++)i.push("tiles/Tile_".concat(a.toString().padStart(2,"0"),".png"));for(r=0;r<=36;r++)i.push("waters/".concat(r.toString().padStart(2,"0"),".png"));for(i.push("characters/ellie/idle.png"),c=0,o=i;c<o.length;c++)s=o[c],n.push([s,"".concat("https://simdaesoo.github.io/Engine/build","/").concat(s)]);return l=0,p.d.shared.onLoad.add((function(){var e=arguments.length<=1?void 0:arguments[1];t(++l/n.length,e.name)})),e.abrupt("return",new Promise((function(e){var t,i=Object(w.a)(n);try{for(i.s();!(t=i.n()).done;){var a,r=t.value;(a=p.d.shared).add.apply(a,Object(x.a)(r))}}catch(c){i.e(c)}finally{i.f()}p.d.shared.load((function(){e()}))})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){if(a)return a.stage.removeAllListeners(),a.stage.removeChildren(),a;var e=window.devicePixelRatio||1;p.j.SCALE_MODE=p.f.NEAREST,p.j.MIPMAP_TEXTURES=p.e.OFF,p.j.STRICT_TEXTURE_CACHE=!0;var t=new j.a;(a=new p.a({width:window.innerWidth,height:window.innerHeight,sharedLoader:!0,powerPreference:"high-performance",backgroundColor:2105376,backgroundAlpha:0,autoStart:!1,antialias:!1,forceCanvas:!1,preserveDrawingBuffer:!1,resolution:e})).view.className="renderer",a.view.style.width="100%",a.view.style.height="100%",t.dom.style.right="0",t.dom.style.removeProperty("left");var n=document.getElementById("content");n.appendChild(a.view),n.appendChild(t.dom);return window.requestAnimationFrame((function e(){i&&i(),t.update(),a.render(),window.requestAnimationFrame(e)})),a}function S(e){i=e}var M=n(2),A=function(){return Object(M.jsx)("div",{style:{position:"absolute",bottom:0,right:0,color:"#FFFFFF",backgroundColor:"rgba(0,0,0,0.5)",padding:"1px 4px"},className:"noselect",children:Object(M.jsx)("a",{href:"https://github.com/SimDaeSoo",children:"Created by daesoo94"})})},k=n(326),C=n(322),L=n(324),E=n(156),T=function(){var e=Object(b.f)(),t=Object(b.e)(),n=Object(r.useState)(!0),i=Object(f.a)(n,2),a=i[0],c=i[1],o=e.pathname;return Object(M.jsx)(k.a,{collapsible:!0,width:a?0:250,style:{position:"absolute",height:"100%",overflow:"auto",backgroundColor:"#1a1d24"},children:Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Header,{style:{position:"fixed",top:0,height:"50px",width:a?56:250,zIndex:2},children:Object(M.jsx)(L.a,{children:Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:a?"external-link-square":"gears2"}),onClick:function(e){e.stopPropagation(),c(!a)},style:{backgroundColor:"#0f131a"},children:a?"-":"Ellie Engine v0.0.1"})})}),Object(M.jsx)(C.a.Body,{style:{height:"calc(100%-50px)",marginTop:"50px"},children:Object(M.jsxs)(L.a,{activeKey:o,children:[Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"th2"}),onSelect:function(){return t.push("/")},eventKey:"/",children:"Tilemap With Buffer"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"th2"}),onSelect:function(){return t.push("/cave-generate")},eventKey:"/cave-generate",children:"Cave Generate"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"th2"}),onSelect:function(){return t.push("/cave-generate-texture")},eventKey:"/cave-generate-texture",children:"Cave With Texture"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"tint"}),onSelect:function(){return t.push("/liquid-simulation")},eventKey:"/liquid-simulation",children:"Liquid Simulation"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"tint"}),onSelect:function(){return t.push("/liquid-simulation-2")},eventKey:"/liquid-simulation-2",children:"Liquid Simulation 2"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"tint"}),onSelect:function(){return t.push("/liquid-stress-test")},eventKey:"/liquid-stress-test",children:"Liquid Stress Test"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"close"}),onSelect:function(){return t.push("/line-intersection")},eventKey:"/line-intersection",disabled:!0,children:"Line Intersection"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"close"}),onSelect:function(){return t.push("/line-intersection-2")},eventKey:"/line-intersection-2",disabled:!0,children:"Line Intersection 2"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-area")},eventKey:"/lighting-area",disabled:!0,children:"Lighting Area"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-area-2")},eventKey:"/lighting-area-2",disabled:!0,children:"Lighting Area 2"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-stress-test")},eventKey:"/lighting-stress-test",disabled:!0,children:"Lighting Stress Test"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"object-ungroup"}),onSelect:function(){return t.push("/aabb-collision")},eventKey:"/aabb-collision",disabled:!0,children:"AABB Collision"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"object-ungroup"}),onSelect:function(){return t.push("/aabb-collision-2")},eventKey:"/aabb-collision-2",disabled:!0,children:"AABB Collision 2"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"object-ungroup"}),onSelect:function(){return t.push("/aabb-stress-test")},eventKey:"/aabb-stress-test",disabled:!0,children:"AABB Stress Test"}),Object(M.jsx)(L.a.Item,{icon:Object(M.jsx)(E.a,{icon:"globe"}),onSelect:function(){return t.push("/sample-world")},eventKey:"/sample-world",disabled:!0,children:"Sample World"})]})})]})})},F=n(325),I=function(e){var t=e.hide,n=e.asset,i=e.percentage;return Object(M.jsxs)("div",{style:{width:"100%",position:"absolute",bottom:"20px",opacity:t?0:1,transitionProperty:"opacity",transitionDuration:"1s"},children:[Object(M.jsxs)("div",{style:{width:"100%",textAlign:"center"},className:"noselect",children:["Loading Asset : ",n]}),Object(M.jsx)(F.a.Line,{className:"notransition",percent:i,status:100===i?"success":"active"})]})};function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;e.beginFill(6710886);for(var i=0;i<t.length;i++)for(var a=0;a<t[i].length;a++)t[i][a][0][0]&&e.drawRect(a*n,i*n,n,n);e.endFill()}function B(e,t,n){var i=n||{},a=i.splitSize,r=void 0===a?0:a,c=i.density,o=void 0===c?{block:.5,liquid:.5}:c;if(0===r){for(var s=new ArrayBuffer(e*t*8+16),l=0;l<e*t;l++){var d=new Uint8Array(s,8*l,4),h=new Float32Array(s,8*l+4,1),u=Math.random()<o.block?1:0;d[0]=u,d[1]=0,d[2]=0,d[3]=0,h[0]=0===u&&Math.random()<o.liquid?1:0}var f=new Float64Array(s,s.byteLength-16,2);return f[0]=t,f[1]=e,[[s]]}if(e%r!==0||t%r!==0)throw new Error("width and height must be perfectly was divided by split size");for(var b=new Array(t/r).fill(!0).map((function(){return new Array(e/r)})),g=0;g<t/r;g++)for(var x=0;x<e/r;x++){for(var w=new ArrayBuffer(8*Math.pow(r,2)+16),p=0;p<Math.pow(r,2);p++){var v=new Uint8Array(w,8*p,4),j=new Float32Array(w,8*p+4,1),m=Math.random()<o.block?1:0;v[0]=m,v[1]=0,v[2]=0,v[3]=0,j[0]=0===m&&Math.random()<o.liquid?1:0}var O=new Float64Array(w,w.byteLength-16,2);O[0]=r,O[1]=r,b[g][x]=w}return b}function K(e){for(var t=new Float64Array(e[0][0],e[0][0].byteLength-16,2),n=t[0],i=t[1],a=new Array(n*e.length).fill(!0).map((function(){return new Array(i*e[0].length)})),r=0;r<a.length;r++)for(var c=[Math.floor(r/n),r%n],o=c[0],s=c[1],l=0;l<a[r].length;l++){var d=[Math.floor(l/i),l%i],h=d[0],u=d[1];a[r][l]=[new Uint8Array(e[o][h],8*(s*i+u),4),new Float32Array(e[o][h],8*(s*i+u)+4,1)]}return a}function P(e,t){return new Array(t).fill(!0).map((function(){return new Array(e).fill(!0).map((function(){return{diff:0,isStable:!1,stableLevel:0}}))}))}var _=function(){return Object(r.useEffect)((function(){var e=K(B(Math.ceil(window.innerWidth/8),Math.ceil(window.innerHeight/8))),t=y(),n=new p.c;n.clear(),q(n,e),t.stage.addChild(n)}),[]),Object(M.jsx)(M.Fragment,{})};function W(e,t,n){for(var i=0,a=-1;a<=1;a++)for(var r=-1;r<=1;r++){var c=e+r,o=t+a;0===r&&0===a||(c<0||o<0||c>=n[0].length||o>=n.length||n[o][c][0][0])&&i++}return i}function D(e,t){for(var n=new Array(e.length).fill(!0).map((function(){return new Array(e[0].length).fill(!1)})),i=t.deathLimit,a=t.birthLimit,r=0;r<e.length;r++)for(var c=0;c<e[0].length;c++){var o=W(c,r,e);e[r][c][0][0]?n[r][c]=!(o<a):n[r][c]=o>i}for(var s=0;s<n.length;s++)for(var l=0;l<n[0].length;l++)e[s][l][0][0]=n[s][l]?1:0}var Y=function(){return Object(r.useEffect)((function(){var e=K(B(Math.ceil(window.innerWidth/8),Math.ceil(window.innerHeight/8))),t=y(),n=new p.c;n.clear(),q(n,e),t.stage.addChild(n);var i=0,a=0;S((function(){i++>=10&&a<10&&(D(e,a<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4}),n.clear(),q(n,e),a++,i=0)}))}),[]),Object(M.jsx)(M.Fragment,{})};function H(e,t,n){var i=t>0&&e>0&&n[t-1][e-1][0][0]===n[t][e][0][0],a=t>0&&n[t-1][e][0][0]===n[t][e][0][0],r=t>0&&e<n[0].length-1&&n[t-1][e+1][0][0]===n[t][e][0][0],c=e>0&&n[t][e-1][0][0]===n[t][e][0][0],o=e<n[0].length-1&&n[t][e+1][0][0]===n[t][e][0][0],s=t<n.length-1&&e>0&&n[t+1][e-1][0][0]===n[t][e][0][0],l=t<n.length-1&&n[t+1][e][0][0]===n[t][e][0][0],d=t<n.length-1&&e<n[0].length-1&&n[t+1][e+1][0][0]===n[t][e+1][0][0];return!a&&!c&&o&&l?1:!a&&c&&o&&l&&!s&&d?41:!a&&c&&o&&l&&!s&&!d?42:!a&&c&&o&&l&&s&&!d?43:!a&&c&&o&&l?2:!a&&c&&!o&&l?3:a&&c&&o&&l&&i&&r&&s&&!d?4:a&&c&&o&&!l&&!i&&r?51:a&&c&&o&&!l&&i&&!r?53:a&&c&&o&&!l&&!i&&!r?52:a&&c&&o&&!l?5:a&&c&&o&&l&&i&&r&&!s&&d?6:a&&c&&o&&l&&i&&r&&s&&d?12:a&&!c&&o&&l&&!r&&d?36:a&&!c&&o&&l&&!r&&!d?37:a&&!c&&o&&l&&r&&!d?38:a&&!c&&o&&l?11:a&&c&&!o&&l&&i&&!s?44:a&&c&&!o&&l&&!i&&!s?45:a&&c&&!o&&l&&!i&&s?46:a&&c&&!o&&l?13:a&&c&&o&&l&&!i&&r&&!s&&d?17:a&&c&&o&&l&&i&&r&&!s&&!d?18:a&&c&&o&&l&&!i&&r&&s&&!d?19:a&&!c&&o&&!l?21:a&&c&&!o&&!l?23:a&&c&&o&&l&&i&&!r&&s&&d?24:a&&c&&o&&l&&!i&&r&&s&&d?57:a&&c&&o&&l&&i&&!r&&s&&!d?27:a&&c&&o&&l&&!i&&!r&&s&&d?28:a&&c&&o&&l&&i&&!r&&!s&&d?29:a||c||!o||l?!a&&c&&o&&!l?33:a||!c||o||l?!(a&&c&&o&&l)||i||r||s||d?a||c||o||!l?a&&!c&&!o&&l?55:!a||c||o||l?a&&c&&o&&l&&i&&!r&&!s&&!d||a&&c&&o&&l&&!i&&r&&!s&&!d||a&&c&&o&&l&&!i&&!r&&s&&!d||a&&c&&o&&l&&!i&&!r&&!s&&d?35:31:56:54:35:34:32}function z(e,t,n){var i=Math.floor(33-33*Math.min(n[t][e][1][0],1));if(t<n.length-1&&t>0&&e<n[0].length-1&&e>0&&!n[t-1][e][1][0]&&n[t+1][e][1][0]&&(n[t][e-1][1][0]&&n[t-1][e-1][1][0]&&n[t][e-1][1][0]<1&&n[t-1][e-1][1][0]<1&&n[t+1][e+1][1][0]<1||n[t][e+1][1][0]&&n[t-1][e+1][1][0]&&n[t][e+1][1][0]<1&&n[t-1][e+1][1][0]<1&&n[t+1][e-1][1][0]<1)){if(n[t-1][e-1][1][0]&&n[t-1][e+1][1][0])return 36;if(n[t-1][e-1][1][0]&&!n[t][e+1][1][0])return 35;if(n[t-1][e+1][1][0]&&!n[t][e-1][1][0])return 34}return i<=1&&(0===t||!n[t-1][e][0][0]&&!n[t-1][e][1][0])?2:t>0&&n[t-1][e][1][0]?0:i}var R=function(){return Object(r.useEffect)((function(){var e=Math.ceil(window.innerWidth/8),t=Math.ceil(window.innerHeight/8),n=K(B(e,t)),i=y(),a=new p.c;a.clear(),q(a,n),i.stage.addChild(a);var r=0,c=0;S((function(){if(r++>=10&&c<10&&(D(n,c<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4}),a.clear(),q(a,n),c++,r=0,10===c)){i.stage.removeChild(a);for(var o=new p.b,s=new Array(t).fill(!0).map((function(){return new Array(e)})),l=0;l<t;l++)for(var d=0;d<e;d++){var h=new p.g(n[l][d][0][0]?p.i.from("tiles/Tile_".concat(H(d,l,n).toString().padStart(2,"0"),".png")):p.i.from("tiles/Tile_61.png"));h.width=8,h.height=8,h.x=8*d,h.y=8*l,s[l][d]=h,o.addChild(h)}i.stage.addChild(o),o.cacheAsBitmap=!0}}))}),[]),Object(M.jsx)(M.Fragment,{})},X=h.a.mark(Z),N=h.a.mark($),U=.005,J=.125,G=.005,Q=.5;function V(e,t){var n=e+t[1][0];return n<=1?1:n<2.125?(1+n*J)/1.125:(n+J)/2}function Z(e,t,n){var i,a,r,c,o,s,l,d,u,f,b;return h.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:for(i=Date.now(),c=0,s=0;s<t.length;s++)for(l=0;l<t[0].length;l++)t[s][l].diff=0;d=0;case 4:if(!(d<e.length)){h.next=47;break}u=0;case 6:if(!(u<e[d].length)){h.next=44;break}if(o=e[d][u],a=o[1][0],r=o[1][0],c=0,!o[0][0]){h.next=13;break}return h.abrupt("continue",41);case 13:if(0!==o[1][0]){h.next=15;break}return h.abrupt("continue",41);case 15:if(!t[d][u].isStable){h.next=17;break}return h.abrupt("continue",41);case 17:if(!(o[1][0]<U)){h.next=20;break}return o[1][0]=0,h.abrupt("continue",41);case 20:if(d<e.length-1&&!e[d+1][u][0][0]&&(c=V(o[1][0],e[d+1][u])-e[d+1][u][1][0],e[d+1][u][1][0]>0&&c>G&&(c*=Q),(c=Math.max(c,0))>Math.min(4,o[1][0])&&(c=Math.min(4,o[1][0])),0!==c&&(r-=c,t[d][u].diff-=c,t[d+1][u].diff+=c,t[d+1][u].isStable=!1)),!(r<U)){h.next=24;break}return t[d][u].diff-=r,h.abrupt("continue",41);case 24:if(u>0&&!e[d][u-1][0][0]&&((c=(r-e[d][u-1][1][0])/4)>G&&(c*=Q),(c=Math.max(c,0))>Math.min(4,r)&&(c=Math.min(4,r)),0!==c&&(r-=c,t[d][u].diff-=c,t[d][u-1].diff+=c,t[d][u-1].isStable=!1)),!(r<U)){h.next=28;break}return t[d][u].diff-=r,h.abrupt("continue",41);case 28:if(u<e[d].length-1&&!e[d][u+1][0][0]&&((c=(r-e[d][u+1][1][0])/3)>G&&(c*=Q),(c=Math.max(c,0))>Math.min(4,r)&&(c=Math.min(4,r)),0!==c&&(r-=c,t[d][u].diff-=c,t[d][u+1].diff+=c,t[d][u+1].isStable=!1)),!(r<U)){h.next=32;break}return t[d][u].diff-=r,h.abrupt("continue",41);case 32:if(d>0&&!e[d-1][u][0][0]&&((c=r-V(r,e[d-1][u]))>G&&(c*=Q),(c=Math.max(c,0))>Math.min(4,r)&&(c=Math.min(4,r)),0!==c&&(r-=c,t[d][u].diff-=c,t[d-1][u].diff+=c,t[d-1][u].isStable=!1)),!(r<U)){h.next=36;break}return t[d][u].diff-=r,h.abrupt("continue",41);case 36:if(a===r&&++t[d][u].stableLevel>=10?t[d][u].isStable=!0:(d>0&&e[d-1][u]&&(t[d-1][u].isStable=!1),d<e.length-1&&e[d+1][u]&&(t[d+1][u].isStable=!1),u>0&&e[d][u-1]&&(t[d][u-1].isStable=!1),u<e[0].length-1&&e[d][u+1]&&(t[d][u+1].isStable=!1)),!(Date.now()-i>=n)){h.next=41;break}return void(h.next=40);case 40:i=h.sent;case 41:u++,h.next=6;break;case 44:d++,h.next=4;break;case 47:f=0;case 48:if(!(f<e.length)){h.next=63;break}b=0;case 50:if(!(b<e[f].length)){h.next=60;break}if(e[f][b][1][0]+=t[f][b].diff,e[f][b][1][0]<U&&(e[f][b][1][0]=0),!(Date.now()-i>=n)){h.next=57;break}return void(h.next=56);case 56:i=h.sent;case 57:b++,h.next=50;break;case 60:f++,h.next=48;break;case 63:return h.abrupt("return");case 64:case"end":return h.stop()}}),X)}function $(e,t){var n,i,a=arguments;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=a.length>2&&void 0!==a[2]?a[2]:3,i=Z(e,t,n);case 2:return i.next(Date.now()).done&&(i=Z(e,t,n)),void(r.next=6);case 6:r.next=2;break;case 8:case"end":return r.stop()}}),N)}var ee=function(){return Object(r.useEffect)((function(){for(var e=Math.ceil(window.innerWidth/8),t=Math.ceil(window.innerHeight/8),n=K(B(e,t,{splitSize:0,density:{block:.5,liquid:.5}})),i=P(e,t),a=0;a<10;a++)D(n,a<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4});for(var r=y(),c=new p.b,o=new p.b,s=new p.b,l=new Array(t).fill(!0).map((function(){return new Array(e)})),d=0;d<t;d++)for(var h=0;h<e;h++)if(n[d][h][0][0]){var u=new p.g(p.i.from("tiles/Tile_".concat(H(h,d,n).toString().padStart(2,"0"),".png")));u.width=8,u.height=8,u.x=8*h,u.y=8*d,l[d][h]=u,o.addChild(u)}else{var f=z(h,d,n),b=new p.g(f>=0?p.i.from("waters/".concat(f.toString().padStart(2,"0"),".png")):p.i.EMPTY);b.width=8,b.height=8,b.x=8*h,b.y=8*d,l[d][h]=b,s.addChild(b);var g=new p.g(p.i.from("tiles/Tile_61.png"));g.width=8,g.height=8,g.x=8*h,g.y=8*d,c.addChild(g)}r.stage.addChild(c),r.stage.addChild(o),r.stage.addChild(s),c.cacheAsBitmap=!0,o.cacheAsBitmap=!0;var x=$(n,i);S((function(){x.next();for(var i=0;i<t;i++)for(var a=0;a<e;a++)if(!n[i][a][0][0]){var r=z(a,i,n);l[i][a].texture=n[i][a][1][0]&&r>=0?p.i.from("waters/".concat(r.toString().padStart(2,"0"),".png")):p.i.EMPTY,l[i][a].alpha=Math.min(.3+.15*n[i][a][1][0],.8)}}))}),[]),Object(M.jsx)(M.Fragment,{})};function te(e){var t=new p.b,n=new p.c,i=new p.h(e,{fontSize:13,fill:16777215});return i.x=1,i.y=1,n.beginFill(0,.5),n.drawRect(0,0,i.width+2,i.height+2),n.endFill(),t.addChild(n),t.addChild(i),{container:t,label:i}}var ne,ie,ae=function(e){var t=[Math.floor(e.targetTouches[0].clientX/8),Math.floor(e.targetTouches[0].clientY/8)];ce(t[0],t[1])},re=function(e){var t=[Math.floor(e.clientX/8),Math.floor(e.clientY/8)];ce(t[0],t[1])},ce=function(e,t){ne&&ne(e,t)},oe=function(){return Object(r.useEffect)((function(){for(var e=Math.ceil(window.innerWidth/8),t=Math.ceil(window.innerHeight/8),n=K(B(e,t,{splitSize:0,density:{block:.5,liquid:0}})),i=P(e,t),a=0;a<10;a++)D(n,a<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4});window.removeEventListener("touchstart",ae),window.removeEventListener("click",re),window.addEventListener("touchstart",ae),window.addEventListener("click",re),ne=function(i,a){for(var r=-3;r<=3;r++)for(var c=-3;c<=3;c++)i+c>=0&&i+c<e&&a+r>=0&&a+r<t&&!n[a+r][i+c][0][0]&&(n[a+r][i+c][1][0]+=1)};var r=y(),c=te("Click to create water").container;c.x=Math.round(window.innerWidth/2-c.width/2),c.y=60;for(var o=new p.b,s=new p.b,l=new p.b,d=new Array(t).fill(!0).map((function(){return new Array(e)})),h=0;h<t;h++)for(var u=0;u<e;u++)if(n[h][u][0][0]){var f=new p.g(p.i.from("tiles/Tile_".concat(H(u,h,n).toString().padStart(2,"0"),".png")));f.width=8,f.height=8,f.x=8*u,f.y=8*h,d[h][u]=f,s.addChild(f)}else{var b=z(u,h,n),g=new p.g(b>=0?p.i.from("waters/".concat(b.toString().padStart(2,"0"),".png")):p.i.EMPTY);g.width=8,g.height=8,g.x=8*u,g.y=8*h,d[h][u]=g,l.addChild(g);var x=new p.g(p.i.from("tiles/Tile_61.png"));x.width=8,x.height=8,x.x=8*u,x.y=8*h,o.addChild(x)}r.stage.addChild(o),r.stage.addChild(s),r.stage.addChild(l),r.stage.addChild(c),o.cacheAsBitmap=!0,s.cacheAsBitmap=!0;var w=$(n,i);S((function(){w.next();for(var i=0;i<t;i++)for(var a=0;a<e;a++)if(!n[i][a][0][0]){var r=z(a,i,n);d[i][a].texture=n[i][a][1][0]&&r>=0?p.i.from("waters/".concat(r.toString().padStart(2,"0"),".png")):p.i.EMPTY,d[i][a].alpha=Math.min(.3+.15*n[i][a][1][0],.8)}}))}),[]),Object(M.jsx)(M.Fragment,{})},se=function(e){var t=[Math.floor(e.targetTouches[0].clientX/8),Math.floor(e.targetTouches[0].clientY/8)];de(t[0],t[1])},le=function(e){var t=[Math.floor(e.clientX/8),Math.floor(e.clientY/8)];de(t[0],t[1])},de=function(e,t){ie&&ie(e,t)},he=function(){return Object(r.useEffect)((function(){var e=Math.ceil(window.innerWidth/8),t=Math.ceil(window.innerHeight/8),n=K(B(e,t,{splitSize:0,density:{block:0,liquid:1}})),i=P(e,t);window.removeEventListener("touchstart",se),window.removeEventListener("click",le),window.addEventListener("touchstart",se),window.addEventListener("click",le),ie=function(i,a){for(var r=-5;r<=5;r++)for(var c=-5;c<=5;c++)i+c>=0&&i+c<e&&a+r>=0&&a+r<t&&!n[a+r][i+c][0][0]&&(n[a+r][i+c][1][0]+=1)};var a=y(),r=te("Click to create water").container;r.x=Math.round(window.innerWidth/2-r.width/2),r.y=60;for(var c=new p.b,o=new p.b,s=new p.b,l=new Array(t).fill(!0).map((function(){return new Array(e)})),d=0;d<t;d++)for(var h=0;h<e;h++)if(n[d][h][0][0]){var u=new p.g(p.i.from("tiles/Tile_".concat(H(h,d,n).toString().padStart(2,"0"),".png")));u.width=8,u.height=8,u.x=8*h,u.y=8*d,l[d][h]=u,o.addChild(u)}else{var f=z(h,d,n),b=new p.g(f>=0?p.i.from("waters/".concat(f.toString().padStart(2,"0"),".png")):p.i.EMPTY);b.width=8,b.height=8,b.x=8*h,b.y=8*d,l[d][h]=b,s.addChild(b);var g=new p.g(p.i.from("tiles/Tile_61.png"));g.width=8,g.height=8,g.x=8*h,g.y=8*d,c.addChild(g)}a.stage.addChild(c),a.stage.addChild(o),a.stage.addChild(s),a.stage.addChild(r),c.cacheAsBitmap=!0,o.cacheAsBitmap=!0;var x=$(n,i);S((function(){x.next();for(var i=0;i<t;i++)for(var a=0;a<e;a++)if(!n[i][a][0][0]){var r=z(a,i,n);l[i][a].texture=n[i][a][1][0]&&r>=0?p.i.from("waters/".concat(r.toString().padStart(2,"0"),".png")):p.i.EMPTY,l[i][a].alpha=Math.min(.3+.15*n[i][a][1][0],.8)}}))}),[]),Object(M.jsx)(M.Fragment,{})},ue=h.a.mark(be),fe=h.a.mark(ge);function be(e){var t,n,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=Date.now(),n=0,i=0;case 3:if(!(i<1e5)){a.next=12;break}if(n+=i,!(Date.now()-t>=e)){a.next=9;break}return a.next=8,n;case 8:t=a.sent;case 9:i++,a.next=3;break;case 12:return a.abrupt("return",n);case 13:case"end":return a.stop()}}),ue)}function ge(){var e,t,n,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=be(2);case 1:return t=e.next(Date.now()),n=t.value,i=t.done,console.log(n,i),i&&(e=be(2)),void(a.next=7);case 7:a.next=1;break;case 9:case"end":return a.stop()}}),fe)}var xe=function(){return Object(r.useEffect)((function(){var e=ge();e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next(),e.next()}),[]),Object(M.jsx)(M.Fragment,{})},we=function(){return Object(r.useEffect)((function(){}),[]),Object(M.jsx)(M.Fragment,{})},pe=function(){var e=Object(r.useState)(0),t=Object(f.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(""),c=Object(f.a)(a,2),o=c[0],s=c[1],l=Object(r.useState)(!1),d=Object(f.a)(l,2),x=d[0],w=d[1];return Object(r.useEffect)((function(){Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),y(),e.next=4,m((function(e,t){i(Math.round(100*e)),s(t)}));case 4:w(!0);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(g.a,{style:{height:"100%"},children:[Object(M.jsxs)(g.a,{id:"content",children:[x&&Object(M.jsx)(b.a,{exact:!0,path:"/",component:_}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/cave-generate",component:Y}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/cave-generate-texture",component:R}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/liquid-simulation",component:ee}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/liquid-simulation-2",component:oe}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/liquid-stress-test",component:he}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/line-intersection",component:xe}),x&&Object(M.jsx)(b.a,{exact:!0,path:"/line-intersection-2",component:we}),Object(M.jsx)(A,{})]}),Object(M.jsx)(I,{hide:x,asset:o,percentage:n}),Object(M.jsx)(T,{})]})})};n(319);s.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(l.a,{children:Object(M.jsx)(pe,{})})}),document.getElementById("root"))}},[[320,1,2]]]);
//# sourceMappingURL=main.09b4b740.chunk.js.map