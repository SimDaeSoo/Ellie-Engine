(this.webpackJsonpEngine=this.webpackJsonpEngine||[]).push([[0],{320:function(e,t,n){"use strict";n.r(t);var i,r,a=n(0),c=n.n(a),o=n(33),l=n.n(o),s=n(90),h=n(9),d=n(323),u=n(2),f=function(){return Object(u.jsx)("div",{style:{position:"absolute",bottom:0,right:0,color:"#FFFFFF"},children:Object(u.jsx)("a",{href:"https://github.com/SimDaeSoo",children:"Created by daesoo94"})})},b=n(153),g=n(325),j=n(322),p=n(324),m=n(155),w=function(){var e=Object(h.f)(),t=Object(h.e)(),n=Object(a.useState)(!0),i=Object(b.a)(n,2),r=i[0],c=i[1],o=e.pathname;return Object(u.jsx)(g.a,{collapsible:!0,width:r?0:250,style:{position:"absolute",height:"100%",overflow:"auto",backgroundColor:"#1a1d24"},children:Object(u.jsxs)(j.a,{children:[Object(u.jsx)(j.a.Header,{style:{position:"fixed",top:0,height:"50px",width:r?50:250,zIndex:2},children:Object(u.jsx)(p.a,{children:Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:r?"angle-right":"angle-left"}),onClick:function(e){e.stopPropagation(),c(!r)},style:{backgroundColor:"#0f131a"},children:"Toggle"})})}),Object(u.jsx)(j.a.Body,{style:{height:"calc(100%-50px)",marginTop:"50px"},children:Object(u.jsxs)(p.a,{activeKey:o,children:[Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"gears2"}),disabled:!0,style:{backgroundColor:"#0f131a"},children:"Ellie Engine v0.0.1"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"th2"}),onSelect:function(){return t.push("/")},eventKey:"/",children:"Tilemap With Buffer"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"th2"}),onSelect:function(){return t.push("/cave-generate")},eventKey:"/cave-generate",children:"Cave Generate"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"th2"}),onSelect:function(){return t.push("/cave-generate-texture")},eventKey:"/cave-generate-texture",children:"Cave Generate Texture"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"square-o"}),onSelect:function(){return t.push("/viewport")},eventKey:"/viewport",disabled:!0,children:"Viewport"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"tint"}),onSelect:function(){return t.push("/liquid-simulation")},eventKey:"/liquid-simulation",children:"Liquid Simulation"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"tint"}),onSelect:function(){return t.push("/liquid-simulation-2")},eventKey:"/liquid-simulation-2",disabled:!0,children:"Liquid Simulation 2"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"tint"}),onSelect:function(){return t.push("/liquid-stress-test")},eventKey:"/liquid-stress-test",disabled:!0,children:"Liquid Stress Test"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"close"}),onSelect:function(){return t.push("/line-intersection")},eventKey:"/line-intersection",disabled:!0,children:"Line Intersection"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-area")},eventKey:"/lighting-area",disabled:!0,children:"Lighting Area"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-area-2")},eventKey:"/lighting-area-2",disabled:!0,children:"Lighting Area 2"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-stress-test")},eventKey:"/lighting-stress-test",disabled:!0,children:"Lighting Stress Test"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"lightbulb-o"}),onSelect:function(){return t.push("/lighting-with-viewport")},eventKey:"/lighting-with-viewport",disabled:!0,children:"Lighting With Viewport"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"object-ungroup"}),onSelect:function(){return t.push("/aabb-collision")},eventKey:"/aabb-collision",disabled:!0,children:"AABB Collision"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"object-ungroup"}),onSelect:function(){return t.push("/aabb-collision-2")},eventKey:"/aabb-collision-2",disabled:!0,children:"AABB Collision 2"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"object-ungroup"}),onSelect:function(){return t.push("/aabb-stress-test")},eventKey:"/aabb-stress-test",disabled:!0,children:"AABB Stress Test"}),Object(u.jsx)(p.a.Item,{icon:Object(u.jsx)(m.a,{icon:"globe"}),onSelect:function(){return t.push("/sample-world")},eventKey:"/sample-world",disabled:!0,children:"Sample World 1"})]})})]})})},v=n(11),x=n.n(v),O=n(17),y=n(8),S=n(154),A=n(151),M=n(152),C=n.n(M);function L(){return E.apply(this,arguments)}function E(){return(E=Object(O.a)(x.a.mark((function e(){var t,n,i,r,a,c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for("https://simdaesoo.github.io/Engine/build",t=[],n=[],i=1;i<=61;i++)n.push("tiles/Tile_".concat(i.toString().padStart(2,"0"),".png"));for(r=0;r<=36;r++)n.push("waters/".concat(r.toString().padStart(2,"0"),".png"));for(a=0,c=n;a<c.length;a++)o=c[a],t.push([o,"".concat("https://simdaesoo.github.io/Engine/build","/").concat(o)]);return e.abrupt("return",new Promise((function(e){var n,i=Object(A.a)(t);try{for(i.s();!(n=i.n()).done;){var r,a=n.value;(r=y.d.shared).add.apply(r,Object(S.a)(a))}}catch(c){i.e(c)}finally{i.f()}y.d.shared.load((function(){e()}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return F.apply(this,arguments)}function F(){return(F=Object(O.a)(x.a.mark((function e(){var t,n,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}return r.stage.removeAllListeners(),r.stage.removeChildren(),e.abrupt("return",r);case 4:return t=window.devicePixelRatio||1,y.i.SCALE_MODE=y.f.NEAREST,y.i.MIPMAP_TEXTURES=y.e.OFF,y.i.STRICT_TEXTURE_CACHE=!0,n=new C.a,(r=new y.a({width:window.innerWidth,height:window.innerHeight,sharedLoader:!0,powerPreference:"high-performance",backgroundColor:2105376,backgroundAlpha:0,autoStart:!1,antialias:!1,forceCanvas:!1,preserveDrawingBuffer:!1,resolution:t})).view.className="renderer",r.view.style.width="100%",r.view.style.height="100%",n.dom.style.right="0",n.dom.style.removeProperty("left"),(a=document.getElementById("content")).appendChild(r.view),a.appendChild(n.dom),e.prev=18,e.next=21,L();case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),console.log(e.t0);case 26:return c=function e(){i&&i(),n.update(),r.render(),window.requestAnimationFrame(e)},window.requestAnimationFrame(c),e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,null,[[18,23]])})))).apply(this,arguments)}function T(e){i=e}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;e.beginFill(6710886);for(var i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++)t[i][r][0][0]&&e.drawRect(r*n,i*n,n,n);e.endFill()}function q(e,t,n){var i=n||{},r=i.splitSize,a=void 0===r?0:r,c=i.density,o=void 0===c?{block:.5,liquid:.5}:c;if(0===a){for(var l=new ArrayBuffer(e*t*8+16),s=0;s<e*t;s++){var h=new Uint8Array(l,8*s,4),d=new Float32Array(l,8*s+4,1),u=Math.random()<o.block?1:0;h[0]=u,h[1]=0,h[2]=0,h[3]=0,d[0]=0===u&&Math.random()<o.liquid?1:0}var f=new Float64Array(l,l.byteLength-16,2);return f[0]=t,f[1]=e,[[l]]}if(e%a!==0||t%a!==0)throw new Error("width and height must be perfectly was divided by split size");for(var b=new Array(t/a).fill(!0).map((function(){return new Array(e/a)})),g=0;g<t/a;g++)for(var j=0;j<e/a;j++){for(var p=new ArrayBuffer(8*Math.pow(a,2)+16),m=0;m<Math.pow(a,2);m++){var w=new Uint8Array(p,8*m,4),v=new Float32Array(p,8*m+4,1),x=Math.random()<o.block?1:0;w[0]=x,w[1]=0,w[2]=0,w[3]=0,v[0]=0===x&&Math.random()<o.liquid?1:0}var O=new Float64Array(p,p.byteLength-16,2);O[0]=a,O[1]=a,b[g][j]=p}return b}function K(e){for(var t=new Float64Array(e[0][0],e[0][0].byteLength-16,2),n=t[0],i=t[1],r=new Array(n*e.length).fill(!0).map((function(){return new Array(i*e[0].length)})),a=0;a<r.length;a++)for(var c=[Math.floor(a/n),a%n],o=c[0],l=c[1],s=0;s<r[a].length;s++){var h=[Math.floor(s/i),s%i],d=h[0],u=h[1];r[a][s]=[new Uint8Array(e[o][d],8*(l*i+u),4),new Float32Array(e[o][d],8*(l*i+u)+4,1)]}return r}var B=function(){return Object(a.useEffect)((function(){Object(O.a)(x.a.mark((function e(){var t,n,i,r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.ceil(window.innerWidth/8),n=Math.ceil(window.innerHeight/8),i=q(t,n),r=K(i),e.next=6,I();case 6:a=e.sent,(c=new y.c).clear(),k(c,r),a.stage.addChild(c),T((function(){}));case 12:case"end":return e.stop()}}),e)})))()}),[]),Object(u.jsx)(u.Fragment,{})};function P(e,t,n){for(var i=0,r=-1;r<=1;r++)for(var a=-1;a<=1;a++){var c=e+a,o=t+r;0===a&&0===r||(c<0||o<0||c>=n[0].length||o>=n.length||n[o][c][0][0])&&i++}return i}function _(e,t){for(var n=new Array(e.length).fill(!0).map((function(){return new Array(e[0].length).fill(!1)})),i=t.deathLimit,r=t.birthLimit,a=0;a<e.length;a++)for(var c=0;c<e[0].length;c++){var o=P(c,a,e);e[a][c][0][0]?n[a][c]=!(o<r):n[a][c]=o>i}for(var l=0;l<n.length;l++)for(var s=0;s<n[0].length;s++)e[l][s][0][0]=n[l][s]?1:0}var W=function(){return Object(a.useEffect)((function(){Object(O.a)(x.a.mark((function e(){var t,n,i,r,a,c,o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.ceil(window.innerWidth/8),n=Math.ceil(window.innerHeight/8),i=q(t,n),r=K(i),e.next=6,I();case 6:a=e.sent,(c=new y.c).clear(),k(c,r),a.stage.addChild(c),o=0,l=0,T((function(){o++>=10&&l<10&&(_(r,l<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4}),c.clear(),k(c,r),l++,o=0)}));case 14:case"end":return e.stop()}}),e)})))()}),[]),Object(u.jsx)(u.Fragment,{})};function H(e,t,n){var i=t>0&&e>0&&n[t-1][e-1][0][0]===n[t][e][0][0],r=t>0&&n[t-1][e][0][0]===n[t][e][0][0],a=t>0&&e<n[0].length-1&&n[t-1][e+1][0][0]===n[t][e][0][0],c=e>0&&n[t][e-1][0][0]===n[t][e][0][0],o=e<n[0].length-1&&n[t][e+1][0][0]===n[t][e][0][0],l=t<n.length-1&&e>0&&n[t+1][e-1][0][0]===n[t][e][0][0],s=t<n.length-1&&n[t+1][e][0][0]===n[t][e][0][0],h=t<n.length-1&&e<n[0].length-1&&n[t+1][e+1][0][0]===n[t][e+1][0][0];return!r&&!c&&o&&s?1:!r&&c&&o&&s&&!l&&h?41:!r&&c&&o&&s&&!l&&!h?42:!r&&c&&o&&s&&l&&!h?43:!r&&c&&o&&s?2:!r&&c&&!o&&s?3:r&&c&&o&&s&&i&&a&&l&&!h?4:r&&c&&o&&!s&&!i&&a?51:r&&c&&o&&!s&&i&&!a?53:r&&c&&o&&!s&&!i&&!a?52:r&&c&&o&&!s?5:r&&c&&o&&s&&i&&a&&!l&&h?6:r&&c&&o&&s&&i&&a&&l&&h?12:r&&!c&&o&&s&&!a&&h?36:r&&!c&&o&&s&&!a&&!h?37:r&&!c&&o&&s&&a&&!h?38:r&&!c&&o&&s?11:r&&c&&!o&&s&&i&&!l?44:r&&c&&!o&&s&&!i&&!l?45:r&&c&&!o&&s&&!i&&l?46:r&&c&&!o&&s?13:r&&c&&o&&s&&!i&&a&&!l&&h?17:r&&c&&o&&s&&i&&a&&!l&&!h?18:r&&c&&o&&s&&!i&&a&&l&&!h?19:r&&!c&&o&&!s?21:r&&c&&!o&&!s?23:r&&c&&o&&s&&i&&!a&&l&&h?24:r&&c&&o&&s&&!i&&a&&l&&h?57:r&&c&&o&&s&&i&&!a&&l&&!h?27:r&&c&&o&&s&&!i&&!a&&l&&h?28:r&&c&&o&&s&&i&&!a&&!l&&h?29:r||c||!o||s?!r&&c&&o&&!s?33:r||!c||o||s?!(r&&c&&o&&s)||i||a||l||h?r||c||o||!s?r&&!c&&!o&&s?55:!r||c||o||s?r&&c&&o&&s&&i&&!a&&!l&&!h||r&&c&&o&&s&&!i&&a&&!l&&!h||r&&c&&o&&s&&!i&&!a&&l&&!h||r&&c&&o&&s&&!i&&!a&&!l&&h?35:31:56:54:35:34:32}function R(e,t,n){var i=Math.floor(33-33*Math.min(n[t][e][1][0],1));return t<n.length-1&&t>0&&e<n[0].length-1&&e>0&&!n[t-1][e][1][0]&&n[t+1][e][1][0]&&(n[t][e-1][1][0]&&n[t-1][e-1][1][0]&&n[t][e-1][1][0]<1&&n[t-1][e-1][1][0]<1&&n[t+1][e+1][1][0]<1||n[t][e+1][1][0]&&n[t-1][e+1][1][0]&&n[t][e+1][1][0]<1&&n[t-1][e+1][1][0]<1&&n[t+1][e-1][1][0]<1)?n[t-1][e-1][1][0]&&n[t-1][e+1][1][0]?36:n[t-1][e-1][1][0]?35:n[t-1][e+1][1][0]?34:-1:i<=1&&(0===t||!n[t-1][e][0][0]&&!n[t-1][e][1][0])?2:t>0&&n[t-1][e][1][0]?0:i}var U=function(){return Object(a.useEffect)((function(){Object(O.a)(x.a.mark((function e(){var t,n,i,r,a,c,o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.ceil(window.innerWidth/8),n=Math.ceil(window.innerHeight/8),i=q(t,n),r=K(i),e.next=6,I();case 6:a=e.sent,(c=new y.c).clear(),k(c,r),a.stage.addChild(c),o=0,l=0,T((function(){if(o++>=10&&l<10&&(_(r,l<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4}),c.clear(),k(c,r),l++,o=0,10===l)){a.stage.removeChild(c);for(var e=new y.b,i=new Array(n).fill(!0).map((function(){return new Array(t)})),s=0;s<n;s++)for(var h=0;h<t;h++){var d=new y.g(r[s][h][0][0]?y.h.from("tiles/Tile_".concat(H(h,s,r).toString().padStart(2,"0"),".png")):y.h.from("tiles/Tile_61.png"));d.width=8,d.height=8,d.x=8*h,d.y=8*s,i[s][h]=d,e.addChild(d)}a.stage.addChild(e),e.cacheAsBitmap=!0}}));case 14:case"end":return e.stop()}}),e)})))()}),[]),Object(u.jsx)(u.Fragment,{})},z=.005,D=.25,G=.005;function J(e,t){var n=e+t[1][0];return n<=1?1:n<2.25?(1+n*D)/1.25:(n+D)/2}function N(e){for(var t=0,n=new Array(e.length).fill(!0).map((function(){return new Array(e[0].length).fill(!0).map((function(){return{diff:0,settled:!1,settleCount:0}}))})),i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++){var a=e[i][r];if(a[0][0])a[1][0]=0;else if(0!==a[1][0]&&!n[i][r].settled)if(a[1][0]<z)a[1][0]=0;else{var c=a[1][0],o=a[1][0];t=0,i<e.length-1&&!e[i+1][r][0][0]&&(t=J(a[1][0],e[i+1][r])-e[i+1][r][1][0],e[i+1][r][1][0]>0&&t>G&&(t*=1),(t=Math.max(t,0))>Math.min(4,a[1][0])&&(t=Math.min(4,a[1][0])),0!==t&&(o-=t,n[i][r].diff-=t,n[i+1][r].diff+=t,n[i+1][r].settled=!1)),o<z?n[i][r].diff-=o:(r>0&&!e[i][r-1][0][0]&&((t=(o-e[i][r-1][1][0])/4)>G&&(t*=1),(t=Math.max(t,0))>Math.min(4,o)&&(t=Math.min(4,o)),0!==t&&(o-=t,n[i][r].diff-=t,n[i][r-1].diff+=t,n[i][r-1].settled=!1)),o<z?n[i][r].diff-=o:(r<e[i].length-1&&!e[i][r+1][0][0]&&((t=(o-e[i][r+1][1][0])/3)>G&&(t*=1),(t=Math.max(t,0))>Math.min(4,o)&&(t=Math.min(4,o)),0!==t&&(o-=t,n[i][r].diff-=t,n[i][r+1].diff+=t,n[i][r+1].settled=!1)),o<z?n[i][r].diff-=o:(i>0&&!e[i-1][r][0][0]&&((t=o-J(o,e[i-1][r]))>G&&(t*=1),(t=Math.max(t,0))>Math.min(4,o)&&(t=Math.min(4,o)),0!==t&&(o-=t,n[i][r].diff-=t,n[i-1][r].diff+=t,n[i-1][r].settled=!1)),o<z?n[i][r].diff-=o:c===o?(n[i][r].settleCount++,n[i][r].settleCount>=10&&(n[i][r].settled=!0)):(i>0&&e[i-1][r]&&(n[i-1][r].settled=!1),i<e.length-1&&e[i+1][r]&&(n[i+1][r].settled=!1),r>0&&e[i][r-1]&&(n[i][r-1].settled=!1),r<e[0].length-1&&e[i][r+1]&&(n[i][r+1].settled=!1)))))}}for(var l=0;l<e.length;l++)for(var s=0;s<e[l].length;s++)e[l][s][1][0]+=n[l][s].diff,e[l][s][1][0]<z&&(e[l][s][1][0]=0)}var V=function(){return Object(a.useEffect)((function(){Object(O.a)(x.a.mark((function e(){var t,n,i,r,a,c,o,l,s,h,d,u,f,b,g,j;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Math.ceil(window.innerWidth/8),n=Math.ceil(window.innerHeight/8),i=q(t,n,{splitSize:0,density:{block:.5,liquid:.5}}),r=K(i),a=0;a<10;a++)_(r,a<4?{deathLimit:3,birthLimit:5}:{deathLimit:4,birthLimit:4});return e.next=7,I();case 7:for(c=e.sent,o=new y.b,l=new y.b,s=new y.b,h=new Array(n).fill(!0).map((function(){return new Array(t)})),d=0;d<n;d++)for(u=0;u<t;u++)r[d][u][0][0]?((f=new y.g(y.h.from("tiles/Tile_".concat(H(u,d,r).toString().padStart(2,"0"),".png")))).width=8,f.height=8,f.x=8*u,f.y=8*d,h[d][u]=f,l.addChild(f)):(b=R(u,d,r),(g=new y.g(b>=0?y.h.from("waters/".concat(b.toString().padStart(2,"0"),".png")):y.h.EMPTY)).alpha=.4,g.width=8,g.height=8,g.x=8*u,g.y=8*d,h[d][u]=g,s.addChild(g),(j=new y.g(y.h.from("tiles/Tile_61.png"))).width=8,j.height=8,j.x=8*u,j.y=8*d,o.addChild(j));c.stage.addChild(o),c.stage.addChild(l),c.stage.addChild(s),o.cacheAsBitmap=!0,l.cacheAsBitmap=!0,console.log(t,n),T((function(){N(r);for(var e=0;e<n;e++)for(var i=0;i<t;i++)if(!r[e][i][0][0]){var a=R(i,e,r);h[e][i].texture=r[e][i][1][0]&&a>=0?y.h.from("waters/".concat(a.toString().padStart(2,"0"),".png")):y.h.EMPTY}}));case 20:case"end":return e.stop()}}),e)})))()}),[]),Object(u.jsx)(u.Fragment,{})},X=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(d.a,{style:{height:"100%"},children:[Object(u.jsx)(w,{}),Object(u.jsxs)(d.a,{id:"content",children:[Object(u.jsx)(h.a,{exact:!0,path:"/",component:B}),Object(u.jsx)(h.a,{exact:!0,path:"/cave-generate",component:W}),Object(u.jsx)(h.a,{exact:!0,path:"/cave-generate-texture",component:U}),Object(u.jsx)(h.a,{exact:!0,path:"/liquid-simulation",component:V}),Object(u.jsx)(f,{})]})]})})};n(319);l.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(X,{})})}),document.getElementById("root"))}},[[320,1,2]]]);
//# sourceMappingURL=main.49b9ea5f.chunk.js.map